(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function s(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(o){if(o.ep)return;o.ep=!0;const a=s(o);fetch(o.href,a)}})();const D="https://opensheet.elk.sh/1lc-Lw7vvm3NXp4IvqvpU3i3s4h25MIG6M2dPm3t3T6U/Sheet1",F="https://opensheet.elk.sh/1lR_-c5QGmLBjVOOOCHvOcEuTVGIWg6u3uubtcCaeOk4/Sheet1",G="8aa441ac6237456fb8ca592512c9fee5";async function _(){try{const[e,t]=await Promise.all([fetch(D).then(n=>n.json()),fetch(F).then(n=>n.json())]),s=[...e,...t].filter(n=>n.name&&n.name.trim()!=="").map(n=>({...n,driveTime:n.driveTime?parseInt(n.driveTime,10):1/0}));return s.sort((n,o)=>n.driveTime-o.driveTime),s}catch(e){throw console.error("Error loading data:",e),e}}async function R(e){if(e.longitude&&e.latitude)return{lng:Number(e.longitude),lat:Number(e.latitude)};if(e.address){const t=encodeURIComponent(e.address);try{const s=await fetch(`https://api.geoapify.com/v1/geocode/search?text=${t}&apiKey=${G}`);if(!s.ok)throw new Error(`Geocode fetch error: ${s.status} ${s.statusText}`);const n=await s.json();if(n.features&&n.features.length>0){const[o,a]=n.features[0].geometry.coordinates;return console.log(`Geocoded '${e.name}':`,{lat:a,lng:o}),{lng:o,lat:a}}}catch(s){console.error(`Error geocoding '${e.name}':`,s)}}return null}function P(e){if(!e)return"";let t=parseInt(e,10);if(isNaN(t))return"";if(t<60)return`${t} min`;const s=Math.floor(t/60),n=t%60;return n===0?`${s} hr`:`${s} hr ${n} min`}function q(e,t,s){t.innerHTML="",e.length!==0&&e.forEach(n=>{const o=document.createElement("div");o.className="tile",o.style.cursor="pointer",o.onclick=()=>{s&&s(n)};const a=document.createElement("img");a.src=n.image||n.pic||"",a.alt=n.name||"Image",a.loading="lazy",o.appendChild(a);const l=document.createElement("div");l.className="tile-content";const i=document.createElement("h3");i.textContent=n.name||"Unknown Name",l.appendChild(i);const r=P(n.driveTime),c=[n.address,r].filter(Boolean).join(" • ");if(c){const u=document.createElement("div");u.className="meta",u.textContent=c,l.appendChild(u)}const p=document.createElement("div");p.className="info";let m="";n.description&&(m+=`<p>${n.description}</p>`),n.hours&&(m+=`<p><strong>Hours:</strong> ${n.hours}</p>`),n.phoneNumber&&(m+=`<p><strong>Phone:</strong> ${n.phoneNumber}</p>`),p.innerHTML=m,l.appendChild(p);const d=document.createElement("div");d.className="tags",n.category&&d.appendChild(L(n.category)),n.type&&d.appendChild(L(n.type)),n.good&&d.appendChild(L("Kids")),n.restrooms?.toLowerCase().includes("y")&&d.appendChild(L("Restrooms")),l.appendChild(d),o.appendChild(l),t.appendChild(o)})}function L(e){const t=document.createElement("div");return t.className="tag",t.textContent=e,t}function V(e,t){const s=document.getElementById("typeFilter"),n=[...new Set(e.map(r=>r.type).filter(Boolean))];s&&(s.innerHTML='<option value="">All types</option>'+n.map(r=>`<option value="${r.toLowerCase()}">${r}</option>`).join(""));const o=document.getElementById("attrTypeFilter"),a=[...new Set(e.map(r=>r.category).filter(Boolean))];o&&(o.innerHTML='<option value="">All types</option>'+a.map(r=>`<option value="${r.toLowerCase()}">${r}</option>`).join("")),["sortOrder","searchInput","typeFilter","attrTypeFilter"].forEach(r=>{const c=document.getElementById(r);c&&c.addEventListener("input",t)});const i=document.getElementById("reset");i&&i.addEventListener("click",()=>{document.querySelectorAll(".filters-grid input, .filters-grid select").forEach(r=>r.value=""),t()}),s&&s.addEventListener("input",r=>{const c=document.querySelector("#attrTypeFilter");c&&(c.value="",r.target.value==="park"?c.classList.add("hidden"):c.classList.remove("hidden"),t())})}function U(e,t){const{searchQuery:s,type:n,attrType:o,sortOrder:a,bennoMode:l}=t;let i=e.filter(r=>{const c=Object.values(r).join(" ").toLowerCase();return!(l&&!c.includes("benno")||s&&!c.includes(s)||n&&(r.type||"").toLowerCase()!==n||o&&(r.category||"").toLowerCase()!==o)});return a==="distance"?i.sort((r,c)=>(r.driveTime||1/0)-(c.driveTime||1/0)):a==="name"&&i.sort((r,c)=>(r.name||"").localeCompare(c.name||"")),i}const z="AIzaSyAgQ-DYpv3KR4551QT6R8hb-_4fjklks0Q";let C=null;function B(){return C||(C=new Promise((e,t)=>{if(window.google&&window.google.maps){e(window.google.maps);return}const s=document.createElement("script");s.src=`https://maps.googleapis.com/maps/api/js?key=${z}&v=weekly&libraries=places,marker`,s.async=!0,s.defer=!0,s.onload=()=>{window.google&&window.google.maps?e(window.google.maps):t(new Error("Google Maps loaded but window.google.maps is undefined"))},s.onerror=n=>t(n),document.head.appendChild(s)}),C)}let g=null,y=[],v=null;const I={lat:40.096044749672394,lng:-74.22197586384449};async function K(e,t="map"){const s=document.getElementById(t);if(!s)return;if(!g){const i=await B(),{Map:r}=await i.importLibrary("maps"),{AdvancedMarkerElement:c}=await i.importLibrary("marker");g=new r(s,{center:I,zoom:12,mapId:"DEMO_MAP_ID"}),v=new i.InfoWindow;const p=new c({map:g,position:I,title:"Lakewood"});A(p,"BMG")}if(y.length>0&&(y.forEach(i=>{i.map=null}),y=[]),!e||e.length===0)return;const n=await B(),{AdvancedMarkerElement:o}=await n.importLibrary("marker"),a=new n.LatLngBounds;a.extend(I),(await Promise.all(e.map(async i=>{const r=await R(i);return r?{...i,coords:r}:null}))).forEach(i=>{if(!i)return;const r=new o({map:g,position:i.coords,title:i.name});A(r,i.name),a.extend(i.coords),y.push(r)}),y.length>0&&g.fitBounds(a)}function A(e,t,s){e.element.addEventListener("mouseenter",()=>{v&&(v.setContent(t),v.open({anchor:e,map:g}))}),e.element.addEventListener("mouseleave",()=>{setTimeout(()=>{v.close()},3e3)})}function O(e,t=!1){if(!e)return;const s=[{src:"./ChatGPT Image Oct 20, 2025, 01_51_31 PM.png",alt:"Ad 1"},{src:"./withSign.png",alt:"Ad 2"},{src:"./ChatGPT Image Sep 29, 2025, 08_17_43 PM.png",alt:"Ad 3"}];e.innerHTML="",e.classList.add("ads-container"),t?(e.classList.add("ads-horizontal"),e.classList.remove("ads-vertical")):(e.classList.add("ads-vertical"),e.classList.remove("ads-horizontal")),s.forEach(n=>{const o=document.createElement("div");o.className="ad-item";const a=document.createElement("img");a.src=n.src,a.alt=n.alt,a.loading="lazy",o.appendChild(a),e.appendChild(o)})}function Q(e,t,s){t.innerHTML="";const n=document.createElement("div");n.className="detail-wrapper";const o=document.createElement("div");o.className="detail-box";const a=document.createElement("button");a.className="back-btn-simple",a.innerHTML="← Back",a.addEventListener("click",s),o.appendChild(a);const l=document.createElement("div");l.className="detail-box-grid";const i=document.createElement("div");i.className="detail-main-col";const r=document.createElement("header");r.className="detail-header-simple";const c=document.createElement("h2");c.textContent=e.name,r.appendChild(c);const p=document.createElement("div");p.className="tags",e.category&&p.appendChild($(e.category)),e.type&&p.appendChild($(e.type)),r.appendChild(p),i.appendChild(r);const m=document.createElement("p");m.className="description-text",m.textContent=e.description||"No description available.",i.appendChild(m);const d=document.createElement("div");if(d.className="extras-container",e.good){const f=document.createElement("div");f.className="extra-tag",f.innerHTML=`<strong>Good for:</strong> ${e.good}`,d.appendChild(f)}if(e.restrooms?.toLowerCase().includes("y")){const f=document.createElement("div");f.className="extra-tag",f.innerHTML="<strong>Restrooms:</strong> Available",d.appendChild(f)}i.appendChild(d);const u=document.createElement("div");u.className="detail-side-col";const H=P(e.driveTime),j=`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(e.address||`${e.latitude},${e.longitude}`)}`;u.innerHTML=`
        <div class="side-stat">
            <span class="label">Location</span>
            <span class="value">${e.address||"N/A"}</span>
        </div>
        <div class="side-stat">
            <span class="label">Time</span>
            <span class="value">${H}</span>
        </div>
        <div class="side-stat">
            <span class="label">Hours</span>
            <span class="value">${e.hours||"Check site"}</span>
        </div>
        <div class="side-stat">
            <span class="label">Phone</span>
            <span class="value">${e.phoneNumber||"N/A"}</span>
        </div>
        <a href="${j}" target="_blank" class="maps-link-btn-full">
            Open in Maps ↗
        </a>
    `,l.appendChild(i),l.appendChild(u),o.appendChild(l),n.appendChild(o),t.appendChild(n)}function $(e){const t=document.createElement("span");return t.className="tag",t.textContent=e,t}function W(){const e=document.getElementById("contact-form"),t=document.getElementById("form-result");e&&e.addEventListener("submit",async s=>{s.preventDefault(),t.style.display="none",t.className="form-result";const n=new FormData(e),o=Object.fromEntries(n),a=JSON.stringify(o),l=e.querySelector('button[type="submit"]'),i=l.textContent;l.textContent="Sending...",l.disabled=!0;try{const r=await fetch("https://api.web3forms.com/submit",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:a}),c=await r.json();r.status===200?(t.innerHTML=c.message||"Message sent successfully!",t.classList.add("success"),e.reset()):(console.log(r),t.innerHTML=c.message||"Something went wrong!",t.classList.add("error"))}catch(r){console.log(r),t.innerHTML="Something went wrong!",t.classList.add("error")}finally{t.style.display="block",l.textContent=i,l.disabled=!1,t.classList.contains("success")&&setTimeout(()=>{t.style.display="none"},5e3)}})}let N=[],h=!1,w=!1,k=0;const M=document.getElementById("viewSwitch"),b=document.getElementById("tiles"),x=document.getElementById("map"),S=document.getElementById("noresults");async function Y(){try{O(document.getElementById("home-ads"),!0),O(document.getElementById("trips-ads"),!1),W(),N=await _(),E(),V(N,()=>E()),M&&M.addEventListener("click",()=>{h=!h,M.classList.toggle("active",h),X()}),J()}catch(e){console.error("Failed to initialize app:",e),b.innerHTML='<div class="no-results">Error loading data. Please try again later.</div>'}}function J(){const e=document.querySelectorAll("nav a"),t=document.getElementById("explore-btn");e.forEach(s=>{s.addEventListener("click",n=>{n.preventDefault();const o=s.getAttribute("data-view");o==="benno-trips"?(w=!0,T("trips")):o==="trips"?(w=!1,T("trips")):(w=!1,T(o)),E(),e.forEach(a=>a.classList.remove("active")),s.classList.add("active")})}),t&&t.addEventListener("click",()=>{w=!1,T("trips"),e.forEach(s=>s.classList.remove("active")),document.querySelector('nav a[data-view="trips"]')?.classList.add("active")})}function T(e){document.querySelectorAll(".view").forEach(s=>{s.classList.add("hidden")});const t=document.getElementById(`${e}-view`);t&&t.classList.remove("hidden"),e==="trips"&&h&&E()}function X(){h?(x.style.display="block",b.classList.add("hidden"),E()):(x.style.display="none",b.classList.remove("hidden"))}function Z(e){const t=document.getElementById("trip-detail-view"),s=document.getElementById("trips-view");k=window.scrollY,Q(e,t,()=>{t.classList.add("hidden"),s.classList.remove("hidden"),window.scrollTo(0,k)}),s.classList.add("hidden"),t.classList.remove("hidden"),window.scrollTo(0,0)}function E(){const e=document.getElementById("searchInput"),t=document.getElementById("typeFilter"),s=document.getElementById("attrTypeFilter"),n=document.getElementById("sortOrder"),o={searchQuery:e?.value.toLowerCase()||"",type:t?.value.toLowerCase()||"",attrType:s?.value.toLowerCase()||"",sortOrder:n?.value||"distance",bennoMode:w},a=U(N,o);S&&(S.style.display=a.length?"none":"block"),h?K(a):q(a,b,Z)}Y();
